FROM phusion/baseimage
RUN apt-get update && apt-get install -y build-essential postgresql nodejs npm
ENV PYTHONUNBUFFERED 1
RUN mkdir /frontier
WORKDIR /frontier
COPY ./ /frontier
RUN pip install -r requirements.txt
RUN (make ng_install && ng_build)
RUN python manage.py collectstatic --noinput --settings=frontier.settings.dev
CMD python manage.py runserver 0.0.0.0:$PORT
